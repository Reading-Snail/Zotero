Poster: Image Acquisition and Storage System for Battery-Free WiFi Camera
Zhili Wang
University of Science and Technology of China Zhili.Wang.mail@qq.com
Longzhi Yuan
University of Science and Technology of China longzhi@mail.ustc.edu.cn
Wei Gong∗
University of Science and Technology of China weigong@ustc.edu.cn
ABSTRACT
Generally, image acquisition and storage requires a considerable amount of energy. To address this issue, we present an innovative approach towards developing a battery-free WiFi camera. Our system uses FRAM and DMA to cache images quickly, select appropriate color modes, and make some optimizations to the code, allowing for the acquisition and storage of a grayscale image of 144 × 176 pixels using only 6mJ of energy in 96ms. Our proposed system provides a promising step towards the realization of a batteryfree WiFi camera, enabling energy-efficient image acquisition and storage in applications such as environmental monitoring, surveillance, and IoT.
CCS CONCEPTS
• Computer systems organization → Sensors and actuators.
KEYWORDS
WiFi camera, Internet of Things
ACM Reference Format:
Zhili Wang, Longzhi Yuan, and Wei Gong. 2023. Poster: Image Acquisition and Storage System for Battery-Free WiFi Camera. In The 21st Annual International Conference on Mobile Systems, Applications and Services (MobiSys ’23), June 18–22, 2023, Helsinki, Finland. ACM, New York, NY, USA, 2 pages. https://doi.org/10.1145/3581791.3597372
1 INTRODUCTION
The image acquisition system has a wide range of applications in daily life, such as cameras and monitoring systems. However, due to its high energy consumption and large data volume, it is difficult to be applied in low-power IoT devices. On the one hand, its high energy consumption requires it to be connected to a power cord or to be frequently recharged. On the other hand, its large data volume makes it difficult to store in the limited RAM of lowpower MCUs, and common FLASH read and write operations are too slow.
∗Corresponding author: Wei Gong.
Permission to make digital or hard copies of part or all of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page. Copyrights for third-party components of this work must be honored. For all other uses, contact the owner/author(s). MobiSys ’23, June 18–22, 2023, Helsinki, Finland © 2023 Copyright held by the owner/author(s). ACM ISBN 979-8-4007-0110-8/23/06 https://doi.org/10.1145/3581791.3597372
Figure 1: Our system can be used in conjunction with WiFi backscatter technology to achieve ultra-low power or even battery-free periodic monitoring of the pressure gauge on fire extinguishers found in office buildings. This eliminates the need for monthly inspections, saving time and effort. Data is transmitted to the cloud for analysis.
There are currently some techniques for ultra-low power acquisition and storage or transmission of images. For example, integrating backscatter and image acquisition, and directly feeding analog pixels from photodiodes to backscatter antennas, eliminating power-consuming ADCs, amplifiers, AGCs and codecs, thus significantly reducing power consumption [2]. However, this technology is not used in off-the-shelf devices, and building ICs for it is too expensive. WISPCam uses a off-the-shelf camera and caches images quickly to FRAM, and then turn off the camera to save energy[1]. Our goal is to achieve ultra-low power image acquisition and storage using off-the-shelf devices. We use FRAM to store data. FRAM is a type of non-volatile memory that has over 100 times faster read/write speeds and over 106 times more read/write cycles than commonly used FLASH, while consuming less than 10−4 of the power. Therefore, we use MSP430FR5969 which is equipped with a 64KB FRAM to allow us to quickly cache images. The camera is then powered down to save overall energy consumption. We also designed a state machine for the system, clarifying its behavior in different states. To further optimize power consumption, we set the appropriate color mode, cleverly configured DMA for data transfer, adjusted the appropriate clock frequency, and made some optimizations to the code. As shown in Figure 1, by integrating with WiFi backscattering technology, our system can collect images of fire extinguisher gauges at timed intervals with ultra-low power consumption and transmit them to the receiving end for processing. If combined with an energy harvesting device, our system can even achieve battery-free image acquisition and transmission.


MobiSys ’23, June 18–22, 2023, Helsinki, Finland Zhili Wang, Longzhi Yuan and Wei Gong.
Figure 2: This is the framework of our system. It consists of MSP430FR5969 and OV7670. The WiFi BackScatter part is not included in our system.
Figure 3: State transition diagram. In acquisition and storage state, the CPU only works when handling interrupts. In transmission state, the CPU only works when writing to data registers and querying status registers. During transmission, their CPUs are both idle.
2 SYSTEM DESIGN
We present the system framework in Figure 2. It uses an off-theshelf MSP430FR5969 microcontroller and an OV7670 camera. The camera’s horizontal Reference (HREF) signal is used to enable the DMA, and the pixel output clock(PCLK) is used to trigger the DMA to store the pixels in the FRAM, after which the camera is turned off. When combined with WiFi backscattering, the WiFi backscattering module can read the FRAM through the pre-configuration SPI interface and transmit it through backscattering. Our system consists of four states: deployment, idle, acquisition and storage, and transmission. In the deployment state, the system initializes MSP430 and configures the camera register. In the idle state, the system waits for capture or transmission commands. In the acquisition and storage state, the system drives the camera to capture an image frame and stores it in FRAM, then turns off the camera. In the transmission state, the system transmits the image to other devices through the configured SPI interface. Figure 3 shows the power consumption modes of the camera and MSP430 CPU in different states. At this stage, our image acquisition and storage time is 538ms with a power consumption of 34.22mJ, but we can still optimize further. First, we adjusted the color mode setting from RGB format to YUV format. Different from the RGB mode where R, G, and B represent the red, green, and blue color components respectively, the YUV color mode uses Y to represent brightness and U, V to represent chrominance. By discarding the U and V data, we can easily capture grayscale images and avoid the calculation required for RGB to grayscale conversion. At the same time, we use DMA, which can transfer data at a faster speed without the intervention
(a) The original image. (b) The captured image.
Figure 4: The image on the right is a 144×176 pixels grayscale image captured by our system, while the image on the left is the original image cropped to the same size.
of the CPU compared to IO port reading. We cleverly utilize its feature of automatically discarding high byte information in wordto-byte transfer mode to discard chrominance and store only the grayscale image. Thanks to this, we were able to reduce the acquisition and storage time to 176ms and power consumption to 11.02mJ. We optimized the code by setting the power mode state transition, using interrupts instead of loop waiting to reduce CPU usage time, and changing the loop counter from up to down because it is easier to detect zeros. As a result, our image acquisition and storage time was reduced to 132ms and power consumption to 7.33mJ. Finally, we found that the clock frequency has a significant impact on the acquisition time and power consumption. We adjusted the appropriate clock frequency to reduce the acquisition and storage time to 96ms and the power consumption to 5.92mJ. We captured multiple images in various scenarios, and as shown in Figure 4, the image was clear. By the above optimizations, we have reduced the time for acquiring and storing a 144*176 grayscale image to 96ms, and the energy consumption to 5.92mJ. Compared to WISPCam, we use the same MCU and camera, but achieve a 30% reduction in power consumption.
3 CONCLUSION
We have developed a low-power image acquisition and storage system that utilizes FRAM for image caching, employs a well-designed state machine, selects appropriate color modes, configures DMA cleverly, adjusts the appropriate clock frequency, and optimizes the code, resulting in a 30% reduction in power consumption compared to WISPCam. With its low power consumption, this system is well-suited for integration with WiFi backscatter technology as well as energy harvesting devices, enabling the creation of a battery-free WiFi camera.
4 ACKNOWLEDGEMENT
We thank the anonymous reviewer for the helpful comments. This work was supported by NSFC Grant No. 61932017 and 61971390.
REFERENCES
[1] S. Naderiparizi, A.N. Parks, Z. Kapetanovic, B. Ransford, and J.R. Smith. 2015. WISPCam: A battery-free RFID camera. In 2015 IEEE International Conference on RFID (RFID).
[2] S.Naderiparizi, M.Hessar, V.Talla, S.Gollakota, and J.R.Smith. 2018. Towards Battery-Free HD Video Streaming. In Proc. of USENIX NSDI.